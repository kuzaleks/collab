<html>
  <head>
    <title>{% block title %}{% endblock %} - CheckSystem</title>
    <link rel="shortcut icon" href="{{ url_for('static', filename='favicon.ico') }}">
    <link rel="stylesheet" href="../../static/css/style.css">
  </head>
  <body>
    <div class="wrapper">
        <div>Microblog:
            <a href="{{ url_for('index') }}">Home</a>
            {% if g.user.is_authenticated %}
            | <a href="{{ url_for('choose_task') }}">Tasks</a>
            | <a href="{{ url_for('user', cart = g.user.cart) }}">Your Page</a>
            {% if g.user.is_prepod() %}
            | <a href="{{ url_for('all_users') }}">All Users</a>
            {% endif %}
            | <a href="{{ url_for('all_attempts') }}">Attemps</a>
            | <a href="{{ url_for('logout') }}">Logout</a>
            {% endif %}
        </div>

        <hr>
        {% with messages = get_flashed_messages() %}
        {% if messages %}
        <ul>
        {% for message in messages %}
            <li>{{ message }} </li>
        {% endfor %}
        </ul>
        {% endif %}
        {% endwith %}
        {% block content %}{% endblock %}
    </div>
    <script src="/static/js/moment.min.js"></script>
    <script>
        function change_format(date){
            return moment(date).fromNow();
        }

        window.onload = function () {
            var dates = document.querySelectorAll(".old-date")
            for ( var i = 0; i < dates.length; ++i ) {
                var elem = dates[i]
                
                var old_date = new Date(elem.innerHTML)

                old_date.setTime(old_date.getTime() - (old_date.getTimezoneOffset()*60*1000))
                
                old_date = new Date(old_date).toISOString()
                
                elem.innerHTML = change_format(old_date)
                elem.classList.remove("old-date")
            }
        }
    </script>
  </body>
</html>